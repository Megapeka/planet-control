<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ò–≥—Ä–∞: –ü–ª–∞–Ω–µ—Ç–∞ —Å –ú–µ–Ω—é</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    background: radial-gradient(ellipse at center, #000011 0%, #000000 80%);
    overflow: hidden;
    height: 100vh;
  }

  canvas {
    position: absolute;
    border-radius: 50%;
    box-shadow: 0 0 40px #00aaff;
    z-index: 0;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  /* –ú–µ–Ω—é */
  .game-menu {
    position: fixed;
    top: 0;
    left: 0;
    height: 100vh;
    width: 25%;
    background: rgba(20, 20, 20, 0.95);
    border-right: 2px solid #777;
    color: #fff;
    font-family: "Segoe UI", sans-serif;
    display: none;
    z-index: 10;
    text-align: left;
    padding: 20px;
    box-sizing: border-box;

    /* üîΩ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ */
    overflow-y: auto;
  }

  .game-menu h2 {
    margin-top: 0;
    font-size: 22px;
    border-bottom: 1px solid #555;
    padding-bottom: 10px;
    text-align: center;
  }

  .checkbox-group { margin-top: 20px; }
  .checkbox-group label { display: block; margin-bottom: 10px; font-size: 16px; cursor: pointer; }
  .checkbox-group input { margin-right: 8px; transform: scale(1.2); }

  .slider-group { margin: 15px 0 25px; display: none; }
  .slider-group label { display: block; font-size: 15px; margin-bottom: 6px; }
  .slider-group input[type=range] { width: 100%; }
  .value { font-size: 14px; color: #ccc; text-align: right; }

  .war-targets { margin-left: 15px; display: none; }
  .war-targets label { font-size: 14px; }

  /* –¢—É–º–±–ª–µ—Ä */
  .toggle {
    position: relative;
    width: 50px;
    height: 24px;
    -webkit-appearance: none;
    background: #444;
    outline: none;
    border-radius: 20px;
    transition: background 0.3s;
    cursor: pointer;
  }
  .toggle:checked { background: #00cc66; }
  .toggle::before {
    content: "";
    position: absolute;
    width: 20px;
    height: 20px;
    left: 2px;
    top: 2px;
    background: #fff;
    border-radius: 50%;
    transition: 0.3s;
  }
  .toggle:checked::before { left: 28px; }

  /* –ö–Ω–æ–ø–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */
  .info-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 12px 18px;
    font-size: 16px;
    background: #00aaff;
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 0 10px #000;
    z-index: 20;
  }
  .info-button:hover { background: #0088cc; }

  /* –û–∫–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */
  .info-modal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #111;
    color: #fff;
    padding: 20px;
    border-radius: 12px;
    width: 400px;
    max-height: 70vh;
    overflow-y: auto;
    box-shadow: 0 0 20px #000;
    display: none;
    z-index: 30;
  }
  .info-modal h2 { margin-top: 0; text-align: center; }
  .close-btn {
    display: block;
    margin: 10px auto 0;
    padding: 8px 16px;
    background: #444;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    color: #fff;
  }
  .close-btn:hover { background: #666; }
</style>
</head>
<body>
<canvas id="earth" width="600" height="600"></canvas>

<!-- –ú–µ–Ω—é –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω—ã -->
<div id="menus"></div>

<!-- –ö–Ω–æ–ø–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
<button class="info-button" onclick="openInfo()">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</button>

<!-- –û–∫–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
<div id="infoModal" class="info-modal">
  <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç—Ä–∞–Ω–∞—Ö</h2>
  <div id="infoContent"></div>
  <button class="close-btn" onclick="closeInfo()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<script>
const canvas=document.getElementById('earth'), ctx=canvas.getContext('2d');
const centerX=canvas.width/2, centerY=canvas.height/2, radius=280;

const labels=[
  {x:centerX-80,y:centerY+90,name:'–ê–Ω–∏–º–µ—à–∞'},
  {x:centerX-190,y:centerY+180,name:'–ú–∞–π–Ω–∫—Ä–∞—Ñ—Ç–∏—è'},
  {x:centerX-260,y:centerY-30,name:'–°–∞–Ω –û–¥–Ω–µ–∞—Å'},
  {x:centerX+180,y:centerY-100,name:'–ï–≤—Ä–∞–∑–∏—è'},
  {x:centerX+290,y:centerY+170,name:'–õ–æ—Ö–∏—è'},
  {x:centerX, y:centerY+340,name:'–ê–Ω—Ç–∞—Ä–∫—Ç–∏–¥–∞'},
  {x:centerX+70,y:centerY+40,name:'–õ—É—Ü–∏—Ñ–µ—Ä–∏—è'}
];

const lands=[
  {x:centerX-120,y:centerY+60,points:[[0,0],[30,-20],[50,10],[40,50],[10,60],[-20,40]]},
  {x:centerX-220,y:centerY+140,points:[[0,0],[20,-10],[30,20],[10,40],[-20,30]]},
  {x:centerX-300,y:centerY-80,points:[[0,0],[60,-30],[70,10],[30,50],[-20,40]]},
  {x:centerX+120,y:centerY-140,points:[[0,0],[80,-40],[90,10],[40,50],[10,40],[-50,20]]},
  {x:centerX+260,y:centerY+140,points:[[0,0],[30,10],[20,40],[-10,30],[-20,10]]},
  {x:centerX,y:centerY+300,points:[[-60,0],[60,0],[40,20],[-40,20]]},
  {x:centerX+50,y:centerY+30,points:[[0,0],[15,-10],[25,5],[20,20],[5,15],[-10,10]],scale:1}
];

const bigPoints=["–õ—É—Ü–∏—Ñ–µ—Ä–∏—è","–ú–∞–π–Ω–∫—Ä–∞—Ñ—Ç–∏—è","–ê–Ω–∏–º–µ—à–∞","–°–∞–Ω –û–¥–Ω–µ–∞—Å","–ï–≤—Ä–∞–∑–∏—è","–õ–æ—Ö–∏—è","–ê–Ω—Ç–∞—Ä–∫—Ç–∏–¥–∞"];

// –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç—Ä–∞–Ω–∞—Ö
const countryInfo={
  "–õ—É—Ü–∏—Ñ–µ—Ä–∏—è":`–ù–∞—Å–µ–ª–µ–Ω–∏–µ ‚Äî 130 —Ç—ã—Å.<br>–ö–ª–∏–º–∞—Ç ‚Äî —Ö–æ–ª–æ–¥–Ω—ã–π, —Å—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 8¬∞–°.<br>–†–æ–∂–¥–∞–µ–º–æ—Å—Ç—å ‚Äî 2.2 —Ä–µ–±—ë–Ω–∫–∞ –Ω–∞ —Å–µ–º—å—é.<br>–ì–æ—Ä–æ–¥–∞ ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.<br>–î–ù–†–ù–í–ù–ò ‚Äî 3`,
  "–ê–Ω–∏–º–µ—à–∞":`–ù–∞—Å–µ–ª–µ–Ω–∏–µ ‚Äî 3.5 –º–ª–Ω.<br>–ö–ª–∏–º–∞—Ç ‚Äî –∂–∞—Ä–∫–∏–π, —Å—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 27¬∞–°.<br>–†–æ–∂–¥–∞–µ–º–æ—Å—Ç—å ‚Äî 3 —Ä–µ–±—ë–Ω–∫–∞ –Ω–∞ —Å–µ–º—å—é.<br>–ì–æ—Ä–æ–¥–∞ ‚Äî –ö–∞–∑–∞–Ω—å –∏ –ú–æ—Å–∫–≤–∞.<br>–î–ù–†–ù–í–ù–ò ‚Äî 8`,
  "–ï–≤—Ä–∞–∑–∏—è":`–ù–∞—Å–µ–ª–µ–Ω–∏–µ ‚Äî 7 –º–ª–Ω.<br>–ö–ª–∏–º–∞—Ç ‚Äî —É–º–µ—Ä–µ–Ω–Ω—ã–π, —Å—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 15¬∞–°.<br>–†–æ–∂–¥–∞–µ–º–æ—Å—Ç—å ‚Äî 1.5 —Ä–µ–±—ë–Ω–∫–∞ –Ω–∞ —Å–µ–º—å—é.<br>–ì–æ—Ä–æ–¥–∞ ‚Äî –í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫.<br>–î–ù–†–ù–í–ù–ò ‚Äî 42`,
  "–ú–∞–π–Ω–∫—Ä–∞—Ñ—Ç–∏—è":`–ù–∞—Å–µ–ª–µ–Ω–∏–µ ‚Äî 1 –º–ª–Ω.<br>–ö–ª–∏–º–∞—Ç ‚Äî –≤–µ—Ç—Ä–µ–Ω—ã–π, —Å—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 12¬∞–°.<br>–†–æ–∂–¥–∞–µ–º–æ—Å—Ç—å ‚Äî 5 –¥–µ—Ç–µ–π –Ω–∞ —Å–µ–º—å—é.<br>–ì–æ—Ä–æ–¥–∞ ‚Äî –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫.<br>–î–ù–†–ù–í–ù–ò ‚Äî 3`,
  "–°–∞–Ω –û–¥–Ω–µ–∞—Å":`–ù–∞—Å–µ–ª–µ–Ω–∏–µ ‚Äî 1.3 –º–ª–Ω.<br>–ö–ª–∏–∞—Ç ‚Äî –∏–∑–º–µ–Ω—á–∏–≤—ã–π, —Å—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ—Ç 12 –¥–æ 25¬∞–°.<br>–†–æ–∂–¥–∞–µ–º–æ—Å—Ç—å ‚Äî 2.4 —Ä–µ–±—ë–Ω–∫–∞ –Ω–∞ —Å–µ–º—å—é.<br>–ì–æ—Ä–æ–¥–∞ ‚Äî –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥.<br>–î–ù–†–ù–í–ù–ò ‚Äî 5`,
  "–õ–æ—Ö–∏—è":`–ù–∞—Å–µ–ª–µ–Ω–∏–µ ‚Äî 1.3 –º–ª–Ω.<br>–ö–ª–∏–º–∞—Ç ‚Äî –∏–∑–º–µ–Ω—á–∏–≤—ã–π, —Å—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ—Ç 12 –¥–æ 25¬∞–°.<br>–†–æ–∂–¥–∞–µ–º–æ—Å—Ç—å ‚Äî 2.4 —Ä–µ–±—ë–Ω–∫–∞ –Ω–∞ —Å–µ–º—å—é.<br>–ì–æ—Ä–æ–¥–∞ ‚Äî –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥.<br>–î–ù–†–ù–í–ù–ò ‚Äî 5`,
  "–ê–Ω—Ç–∞—Ä–∫—Ç–∏–¥–∞":`–ù–∞—Å–µ–ª–µ–Ω–∏–µ ‚Äî 1.3 –º–ª–Ω.<br>–ö–ª–∏–º–∞—Ç ‚Äî –∏–∑–º–µ–Ω—á–∏–≤—ã–π, —Å—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ—Ç 12 –¥–æ 25¬∞–°.<br>–†–æ–∂–¥–∞–µ–º–æ—Å—Ç—å ‚Äî 2.4 —Ä–µ–±—ë–Ω–∫–∞ –Ω–∞ —Å–µ–º—å—é.<br>–ì–æ—Ä–æ–¥–∞ ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.<br>–î–ù–†–ù–í–ù–ò ‚Äî 5`
};

// –†–∏—Å—É–µ–º –∑–µ–º–ª—é
function drawStars(count){for(let i=0;i<count;i++){ctx.beginPath();ctx.fillStyle=`rgba(255,255,255,${Math.random()})`;ctx.arc(Math.random()*canvas.width,Math.random()*canvas.height,Math.random()*1.5,0,Math.PI*2);ctx.fill();}}
function drawCircle(x,y,r,color){ctx.beginPath();ctx.arc(x,y,r,0,Math.PI*2);ctx.fillStyle=color;ctx.fill();}
function drawLand(x,y,points,scale=2){ctx.beginPath();ctx.moveTo(points[0][0]*scale+x,points[0][1]*scale+y);for(let i=1;i<points.length;i++)ctx.lineTo(points[i][0]*scale+x,points[i][1]*scale+y);ctx.closePath();ctx.fillStyle="#228B22";ctx.fill();}
function drawLabel(x,y,text){ctx.beginPath();ctx.fillStyle="#ffcc00";ctx.strokeStyle="#000";ctx.lineWidth=3;ctx.arc(x,y,bigPoints.includes(text)?8:6,0,Math.PI*2);ctx.fill();ctx.stroke();ctx.font="16px Arial";ctx.textBaseline="middle";ctx.textAlign="center";ctx.lineWidth=2;ctx.strokeText(text,x,y-15);ctx.fillText(text,x,y-15);}

function drawEarth(){drawCircle(centerX,centerY,radius,"#1E90FF");lands.forEach(l=>drawLand(l.x,l.y,l.points,l.scale||2));labels.forEach(l=>drawLabel(l.x,l.y,l.name));}
drawStars(200);drawEarth();

// === –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω—ã ===
const menus=document.getElementById("menus");

function createMenu(region){
  const div=document.createElement("div");
  div.className="game-menu";
  div.id="menu-"+region;
  div.innerHTML=`
    <h2>Menu: ${region}</h2>
    <div class="checkbox-group">
      <label><input type="checkbox" class="aggressiveCheck"> –°–¥–µ–ª–∞—Ç—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π</label>
      <div class="slider-group aggressiveSlider">
        <label>–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç—å: <span class="value">50</span></label>
        <input type="range" min="1" max="100" value="50" class="aggressiveRange">
      </div>

      <label><input type="checkbox" class="peacefulCheck"> –°–¥–µ–ª–∞—Ç—å –º–∏—Ä–Ω–æ–π</label>
      <div class="slider-group peacefulSlider">
        <label>–î—Ä—É–∂–µ–ª—é–±–Ω–æ—Å—Ç—å: <span class="value">50</span></label>
        <input type="range" min="1" max="100" value="50" class="peacefulRange">
      </div>

      <label><input type="checkbox" class="taxToggle"> –ü–æ–≤—ã—Å–∏—Ç—å –Ω–∞–ª–æ–≥–∏</label>
      <div class="slider-group taxSlider">
        <label>–ù–∞–ª–æ–≥–∏: <span class="value">5</span></label>
        <input type="range" min="1" max="10" value="5" class="taxRange">
      </div>

      <label><input type="checkbox" class="warCheck" disabled> –û–±—ä—è–≤–∏—Ç—å –≤–æ–π–Ω—É</label>
      <div class="war-targets"></div>

      <label>–£–≤–µ–ª–∏—á–∏—Ç—å –ø–µ–Ω—Å–∏—é <input type="checkbox" class="toggle pensionToggle"></label>
      <div class="slider-group pensionSlider">
        <label>–ü—Ä–æ—Ü–µ–Ω—Ç: <span class="value">100</span>%</label>
        <input type="range" min="1" max="1000" value="100" class="pensionRange">
      </div>

      <label>–£–≤–µ–ª–∏—á–∏—Ç—å –∑–∞—Ä–ø–ª–∞—Ç—É <input type="checkbox" class="toggle salaryToggle"></label>
      <div class="slider-group salarySlider">
        <label>–ü—Ä–æ—Ü–µ–Ω—Ç: <span class="value">100</span>%</label>
        <input type="range" min="1" max="1000" value="100" class="salaryRange">
      </div>
    </div>
  `;
  menus.appendChild(div);

  // –ù–∞–≤–µ—à–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
  const aggressiveCheck=div.querySelector(".aggressiveCheck"),
        aggressiveSlider=div.querySelector(".aggressiveSlider"),
        aggressiveRange=div.querySelector(".aggressiveRange"),
        aggressiveValue=aggressiveSlider.querySelector(".value"),
        peacefulCheck=div.querySelector(".peacefulCheck"),
        peacefulSlider=div.querySelector(".peacefulSlider"),
        peacefulRange=div.querySelector(".peacefulRange"),
        peacefulValue=peacefulSlider.querySelector(".value"),
        taxToggle=div.querySelector(".taxToggle"),
        taxSlider=div.querySelector(".taxSlider"),
        taxRange=div.querySelector(".taxRange"),
        taxValue=taxSlider.querySelector(".value"),
        warCheck=div.querySelector(".warCheck"),
        warTargets=div.querySelector(".war-targets"),
        pensionToggle=div.querySelector(".pensionToggle"),
        pensionSlider=div.querySelector(".pensionSlider"),
        pensionRange=div.querySelector(".pensionRange"),
        pensionValue=pensionSlider.querySelector(".value"),
        salaryToggle=div.querySelector(".salaryToggle"),
        salarySlider=div.querySelector(".salarySlider"),
        salaryRange=div.querySelector(".salaryRange"),
        salaryValue=salarySlider.querySelector(".value");

  function bindSlider(check,slider,range,value){
    if(check) check.addEventListener("change",()=>slider.style.display=check.checked?"block":"none");
    if(range) range.addEventListener("input",()=>value.textContent=range.value);
  }
  bindSlider(aggressiveCheck,aggressiveSlider,aggressiveRange,aggressiveValue);
  bindSlider(peacefulCheck,peacefulSlider,peacefulRange,peacefulValue);
  bindSlider(taxToggle,taxSlider,taxRange,taxValue);
  bindSlider(pensionToggle,pensionSlider,pensionRange,pensionValue);
  bindSlider(salaryToggle,salarySlider,salaryRange,salaryValue);

  aggressiveRange.addEventListener("input",()=>{
    warCheck.disabled=aggressiveRange.value<=50;
    if(warCheck.disabled){warCheck.checked=false;warTargets.style.display="none";}
  });

  warCheck.addEventListener("change",()=>{
    warTargets.innerHTML="";
    if(warCheck.checked){
      warTargets.style.display="block";
      bigPoints.filter(r=>r!==region).forEach(r=>{
        const lbl=document.createElement("label");
        lbl.innerHTML=`<input type="checkbox"> ${r}`;
        warTargets.appendChild(lbl);
      });
    } else warTargets.style.display="none";
  });
}

// —Å–æ–∑–¥–∞—ë–º –º–µ–Ω—é –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω
bigPoints.forEach(region=>createMenu(region));

// === –ö–ª–∏–∫ –ø–æ —Ç–æ—á–∫–∞–º ===
canvas.addEventListener("click",e=>{
  const rect=canvas.getBoundingClientRect(),clickX=e.clientX-rect.left,clickY=e.clientY-rect.top;
  let clicked=false;
  labels.forEach(l=>{
    const dx=clickX-l.x,dy=clickY-l.y,dist=Math.sqrt(dx*dx+dy*dy);
    if(bigPoints.includes(l.name)&&dist<=10){
      document.querySelectorAll(".game-menu").forEach(m=>m.style.display="none");
      document.getElementById("menu-"+l.name).style.display="block";
      clicked=true;
    }
  });
  if(!clicked) document.querySelectorAll(".game-menu").forEach(m=>m.style.display="none");
});

// === –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è ===
function openInfo(){
  const infoContent=document.getElementById("infoContent");
  infoContent.innerHTML="";
  for(const c in countryInfo){
    infoContent.innerHTML+=`<h3>${c}</h3><p>${countryInfo[c]}</p><hr>`;
  }
  document.getElementById("infoModal").style.display="block";
}
function closeInfo(){document.getElementById("infoModal").style.display="none";}
</script>
</body>
</html>
